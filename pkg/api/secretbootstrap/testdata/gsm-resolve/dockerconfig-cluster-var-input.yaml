# Test case: dockerconfig with ${CLUSTER} variable substitution in gsm_secrets
cluster_groups:
  production-clusters:
    - prod01
    - prod02

bundles:
  - name: docker-registry-auth
    dockerconfig:
      as: .dockerconfigjson
      registries:
        - collection: registry-credentials
          group: production
          registry_url: quay.io
          auth_field: auth-token
          email_field: email
    gsm_secrets:
      - collection: registry-credentials
        group: production
        fields:
          - name: auth-token
            as: token
    targets:
      - cluster_groups:
          - production-clusters
        namespace: openshift-config
        type: kubernetes.io/dockerconfigjson